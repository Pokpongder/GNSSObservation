/* Navbar Styles */
/* Navbar Styles */
#navbar {
    height: 50px;
    background-color: rgba(0, 0, 0, 0.25);
    color: white;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 20px;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    z-index: 1100;
    /* Ensure it stays above map */
    box-sizing: border-box;
    /* Text shadow for better visibility on map */
    text-shadow: none;
}

.nav-brand {
    font-size: 20px;
    font-weight: bold;
    display: flex;
    align-items: center;
}

.nav-brand img {
    height: 40px;
    /* Adjust as needed */
    margin-right: 10px;
}

.nav-links a,
.nav-links button {
    color: white;
    text-decoration: none;
    background: none;
    border: none;
    font-size: 16px;
    margin-left: 20px;
    cursor: pointer;
    font-family: inherit;
    text-shadow: none;
}

.nav-links a:hover,
.nav-links button:hover {
    text-decoration: underline;
}

/* Dropdown Styles */
.dropdown {
    position: relative;
    display: inline-block;
}

.dropdown-content {
    display: block;
    /* Make block so we can animate properties */
    position: absolute;
    top: 36px;
    left: 0;
    right: auto;
    background-color: #f9f9f9;
    min-width: 180px;
    box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
    z-index: 1003;
    text-shadow: none;

    /* Animation Styles */
    max-height: 0;
    opacity: 0;
    visibility: hidden;
    overflow: hidden;
    transition: max-height 0.4s ease-in-out, opacity 0.4s ease-in-out, visibility 0.4s;
}

.dropdown-content.show {
    max-height: 300px;
    /* Match original max-height */
    opacity: 1;
    visibility: visible;
    overflow-y: auto;
}

.dropdown-content a {
    color: black;
    padding: 12px 16px;
    text-decoration: none;
    display: flex;
    /* Use flex to align text and dot */
    justify-content: space-between;
    align-items: center;
    margin: 0;
    text-align: left;
}

.dropdown-content a:hover {
    background-color: #f1f1f1;
    text-decoration: none;
}



/* .show class is now handled specifically in .dropdown-content.show for the animation, 
   but we keep this if used elsewhere, though typically we should avoid general utilities if we want specific animations.
   For this case, since JS toggles 'show', our specific selector .dropdown-content.show will take precedence 
   due to specificity or we ensure it does consistent things. 
   Actually, the previous rule was display: block !important. 
   We don't strictly need it for the dropdown anymore since it's already display: block. 
   We can leave it or remove it if unused elsewhere. */
.show {
    display: block !important;
}

/* Adjust map to fit below navbar */
#map {
    height: 100vh;
    /* Full screen height */
    /* Subtract navbar height - removed */
    width: 100%;
    background-color: #f0f0f0;
    margin-top: 0;
    /* Map goes to top */
    /* Push map down - removed */
}

/* ... existing styles ... */
body {
    margin: 0;
    padding: 0;
    font-family: 'Roboto', sans-serif;
    /* Add a font */
}

/* Custom Popup Styles (Existing) */
.square-popup .leaflet-popup-content-wrapper {
    border-radius: 0 !important;
    padding: 0;
}

.square-popup .leaflet-popup-content {
    margin: 10px;
}

.station-popup h3 {
    margin: 0 0 10px 0;
    font-size: 16px;
    border-bottom: 1px solid #ccc;
    padding-bottom: 5px;
}

.station-data-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.station-data-list li {
    margin-bottom: 5px;
}

.station-data-list li a {
    text-decoration: none;
    color: #333;
    display: block;
    padding: 5px;
    background-color: #f9f9f9;
    border: 1px solid #eee;
    transition: background-color 0.2s;
}

.station-data-list li a:hover {
    background-color: #e0e0e0;
    color: #000;
}

/* Sidebar Styles */
.sidebar {
    height: calc(100vh - 50px);
    /* Full height minus navbar */
    width: 0;
    /* Initially hidden */
    position: fixed;
    z-index: 1002;
    /* Above map and dropdowns but below navbar if needed? Actually navbar is 1000, dropdown 1001. Let's make sidebar 1002 */
    top: 50px;
    right: 0;
    background-color: white;
    overflow-x: hidden;
    transition: 0.3s;
    /* Smooth transition */
    box-shadow: -2px 0 5px rgba(0, 0, 0, 0.2);
}

.sidebar.open {
    width: 30%;
}

/* Ensure sidebar takes decent width on mobile */
@media screen and (max-width: 768px) {
    .sidebar.open {
        width: 80%;
    }
}

.sidebar-content {
    padding: 20px;
}

.close-btn {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 30px;
    border: none;
    background: none;
    cursor: pointer;
    color: #888;
}

.close-btn:hover {
    color: #000;
}

/* Map Control Buttons (Reset) */
.map-control-btn {
    position: fixed;
    bottom: 30px;
    left: 20px;
    /* Moved to bottom-left */
    z-index: 1000;
    /* Above map */
    background-color: rgba(255, 255, 255, 0.8);
    border: 2px solid rgba(0, 0, 0, 0.2);
    border-radius: 50%;
    /* Match Leaflet style usually square-ish */
    padding: 5px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 30px;
    height: 30px;
    transition: background-color 0.2s;
}

.map-control-btn:hover {
    background-color: #f4f4f4;
}

/* Station Coordinates in Sidebar */
.station-coords {
    font-size: 0.9em;
    color: #555;
    margin-top: -10px;
    margin-bottom: 15px;
    font-weight: normal;
}

/* Station Image */
.station-image {
    width: 100%;
    height: auto;
    border-radius: 8px;
    margin-bottom: 15px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    object-fit: cover;
    max-height: 250px;
    /* Prevent it from taking too much vertical space */
    background-color: #f0f0f0;
    /* Placeholder color while loading */
    cursor: pointer;
    transition: 0.3s;
}

.station-image:hover {
    opacity: 0.7;
}

/* Accordion Styles */
.accordion-content {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease-out;
    padding: 0 5px;
    /* Add some horizontal padding if needed */
}

/* Lightbox Styles */
.lightbox {
    display: none;
    /* Hidden by default */
    position: absolute;
    z-index: 2000;
    /* Sit on top of everything (sidebar is 1002) */
    padding-top: 0;
    /* Location of the box */
    left: 0;
    top: 0;
    width: 100%;
    /* Full width */
    height: 100%;
    /* Full height */
    overflow: auto;
    /* Enable scroll if needed */
    background-color: rgb(0, 0, 0);
    /* Fallback color */
    background-color: rgba(0, 0, 0, 0.9);
    /* Black w/ opacity */
}

/* Lightbox Flex Container */
.lightbox-container {
    display: flex;
    justify-content: center;
    align-items: flex-start;
    width: 90%;
    height: 90%;
    margin: 60px auto auto auto;
    /* Add margin-top for navbar/close btn */
    max-width: 1400px;
}

.lightbox-content {
    margin: 0;
    /* Remove auto margin */
    display: block;
    width: auto;
    max-width: 65%;
    /* Take up about 2/3 */
    max-height: 85vh;
    object-fit: contain;
    animation-name: zoom;
    animation-duration: 0.6s;
    background-color: #000;
    /* Backdrop for image if different aspect ratio */
}

/* Lightbox Info Section */
#lightbox-info {
    flex: 1;
    /* Take remaining space */
    max-width: 35%;
    margin-left: 20px;
    margin-top: 30px;
    color: #e0e0e0;
    background-color: rgba(0, 0, 0, 0.6);
    padding: 15px;
    /* Reduced padding */
    border-radius: 8px;
    font-family: 'Roboto', sans-serif;
    text-align: left;
    font-size: 0.85rem;
    /* Smaller font */
    max-height: 80vh;
    overflow-y: auto;
    /* Scroll if content is too long */
}

.info-item {
    margin-bottom: 15px;
}

.info-item h3 {
    margin-top: 0;
    color: #fff;
    border-bottom: 1px solid #555;
    padding-bottom: 5px;
    font-size: 1rem;
}

.info-item ul {
    list-style-type: disc;
    padding-left: 15px;
}

.info-item li {
    margin-bottom: 5px;
    line-height: 1.4;
}

@keyframes zoom {
    from {
        transform: scale(0)
    }

    to {
        transform: scale(1)
    }
}

.close-lightbox {
    position: absolute;
    top: 15px;
    right: 35px;
    color: #f1f1f1;
    font-size: 40px;
    font-weight: bold;
    transition: 0.3s;
    cursor: pointer;
    z-index: 2005;
    /* Ensure above container */
}

.close-lightbox:hover,
.close-lightbox:focus {
    color: #bbb;
    text-decoration: none;
    cursor: pointer;
}

/* Responsive: Stack on smaller screens */
@media only screen and (max-width: 900px) {
    .lightbox-container {
        flex-direction: column;
        align-items: center;
        margin-top: 60px;
        height: auto;
        overflow-y: auto;
        /* Allow full page scroll if needed on mobile */
        padding-bottom: 50px;
    }

    .lightbox-content {
        max-width: 100%;
        width: 100%;
        margin-bottom: 20px;
    }

    #lightbox-info {
        max-width: 100%;
        width: 90%;
        margin-left: 0;
        font-size: 0.9rem;
        max-height: none;
        /* Let it grow */
    }
}

/* Status Indicator Dot */
.status-dot {
    height: 12px;
    width: 12px;
    background-color: #ccc;
    /* Default/Loading */
    border-radius: 50%;
    display: inline-block;
    margin-left: 10px;
    vertical-align: middle;
}

.status-green {
    background-color: #28a745;
    /* Green */
}

.status-orange {
    background-color: #ffc107;
    /* Orange */
}

.status-red {
    background-color: #dc3545;
    /* Red */
}